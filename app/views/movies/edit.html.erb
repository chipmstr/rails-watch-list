<div class="container mt-4">
  <h1>Edit Movie</h1>

  <%= form_with model: @movie, local: true do |f| %>
    <div class="mb-3">
      <%= f.label :title %>
      <%= f.text_field :title, class: 'form-control' %>
    </div>

    <div class="mb-3">
      <%= f.label :overview %>
      <%= f.text_area :overview, class: 'form-control' %>
    </div>

    <div class="mb-3">
      <%= f.label :poster_url %>
      <%= f.text_field :poster_url, class: 'form-control' %>
    </div>

    <div class="mb-3">
      <%= f.label :rating, "Rating" %>
      <div>
        <%= f.range_field :rating, class: 'form-range', min: 1, max: 5, step: 0.5, value: @movie.rating, style: 'width: 30%; margin: 0 auto; appearance: none; background: #e9ecef;' %> <!-- shorter and more prominent slider -->
      </div>
      <p>Current Rating: <span id="current-rating"><%= @movie.rating %></span></p> <!-- display current rating -->
    </div>

    <div class="mb-3">
      <button type="submit" class="btn btn-primary">
        <i class="fas fa-save"></i> Update Movie
      </button>
      <%= link_to 'Delete', movie_path(@movie), method: :delete, data: { confirm: "Are you sure?" }, class: 'btn btn-danger ms-2' %>
    </div>
  <% end %>

  <div>
    <%= link_to '<i class="fas fa-times"></i> Cancel'.html_safe, movie_path(@movie), class: 'btn btn-secondary' %>
  </div>
</div>

<script>
  // update current rating display when slider value changes
  document.addEventListener("DOMContentLoaded", function() {
    const slider = document.querySelector('input[type="range"]');
    const output = document.getElementById('current-rating');

    slider.oninput = function() {
      output.textContent = this.value; // update the displayed rating
    };
  });
</script>
