<div class="container mt-4"> <!-- added container for consistent width -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="mb-0">My Lists</h1> <!-- title for the lists page -->
    <div>
      <%= link_to '<i class="fas fa-plus"></i> Create a new list'.html_safe, new_list_path, class: 'btn btn-success me-2' %> <!-- button to create a new list with plus icon -->
      <%= link_to 'View Movies', movies_path, class: 'btn btn-secondary' %> <!-- button to navigate to movies page -->
    </div>
  </div>

  <div class="row">
    <% @lists.each do |list| %> <!-- iterate through each list -->
      <div class="col-md-3">
        <div class="card mb-4">
          <% if list.bookmarks.any? %> <!-- check if the list has any bookmarks -->
            <%= image_tag list.bookmarks.first.movie.poster_url, class: "card-img-top" %> <!-- display the first movie's poster -->
          <% else %>
            <%= image_tag "https://via.placeholder.com/150", class: "card-img-top" %> <!-- example image if no movies are present -->
          <% end %>
          <div class="card-body d-flex flex-column" style="height: 100%;"> <!-- make the card body a flex container to position content -->
            <h5 class="card-title"><%= list.name %></h5> <!-- display the name of the list -->
            <div class="rating-stars mb-2"> <!-- stars for average rating -->
              <% average_rating = list.bookmarks.joins(:movie).average(:rating).to_f %> <!-- get average rating from associated movies -->
              <% (1..5).each do |i| %> <!-- loop through 1 to 5 stars -->
                <% half_star = (i <= average_rating) ? 'fas fa-star' : (i == average_rating + 0.5 ? 'fas fa-star-half-alt' : 'far fa-star') %> <!-- determine star type -->
                <i class="<%= half_star %>" style="color: gold; font-size: 1.5rem;"></i> <!-- set color and size for stars -->
              <% end %>
            </div>
            <div class="mt-auto"> <!-- pushes buttons to the bottom -->
              <%= link_to "View", list_path(list), class: "btn btn-primary w-100" %> <!-- button to view the list, made full width -->
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>
