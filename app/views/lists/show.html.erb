<div class="container mt-4"> <!-- added container for consistent width -->
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h1><%= @list.name %></h1>
    <div>
      <%= link_to 'Back to Lists', lists_path, class: 'btn btn-secondary' %>
    </div>
  </div>

  <h2>Movies in this list:</h2>
  <div class="row">
    <% @list.bookmarks.each do |bookmark| %>
      <div class="col-md-3 mb-4"> <!-- adjusted to show more cards in a row -->
        <div class="card h-100 shadow">
          <img class="card-img-top" src="<%= bookmark.movie.poster_url %>" alt="<%= bookmark.movie.title %>" class="img-fluid" style="object-fit: contain; max-height: 250px;" /> <!-- original aspect ratio -->
          <div class="card-body" style="background-color: #f8f9fa;"> <!-- light background for card body -->
            <h5 class="card-title"><%= bookmark.movie.title %></h5>
            <div class="rating-stars mb-2">
              <% rating = bookmark.movie.rating %> <!-- use the rating directly -->
              <% (1..5).each do |i| %>
                <% half_star = (i <= rating) ? 'fas fa-star' : (i == rating + 0.5 ? 'fas fa-star-half-alt' : 'far fa-star') %> <!-- determine star type -->
                <i class="<%= half_star %>" style="color: gold; font-size: 1.5rem;"></i> <!-- set color and size -->
              <% end %>
            </div>

            <p class="card-text"><%= bookmark.comment %></p>
          </div>
          <div class="d-flex justify-content-between" style="background-color: #e9ecef; padding: 10px;"> <!-- light grey background for button container -->
            <%= link_to "View", movie_path(bookmark.movie), class: "btn btn-primary" %> <!-- view button -->
            <%= link_to "Delete", list_bookmark_path(@list, bookmark), method: :delete, data: { confirm: "Are you sure?" }, class: "btn btn-danger" %> <!-- delete button -->
          </div>
        </div>
      </div>
    <% end %>
  </div>

  <h2>Add a new movie to this list:</h2>
  <%= form_with(model: [@list, @bookmark], local: true) do |form| %>
    <div class="mb-3">
      <%= form.label :movie_id, "Choose a movie" %>
      <%= form.collection_select :movie_id, Movie.all, :id, :title, prompt: true, class: "form-select" %>
    </div>

    <div class="mb-3">
      <%= form.label :comment %>
      <%= form.text_field :comment, class: "form-control" %>
    </div>

    <%= form.submit "Add movie", class: "btn btn-primary" %>
  <% end %>

  <div class="mt-3">
    <%= link_to 'Back to Lists', lists_path, class: 'btn btn-secondary' %>
  </div>
</div>
